-- **************
-- Halls Of Stone
-- **************

-- boss scripts
UPDATE creature_template SET ScriptName = 'boss_maiden_of_grief' WHERE entry = 27975;
UPDATE creature_template SET ScriptName = 'boss_krystallus' WHERE entry = 27977;
UPDATE creature_template SET ScriptName = 'boss_sjonnir' WHERE entry = 27978;
UPDATE creature_template SET ScriptName='mob_tribuna_controller' WHERE entry=28234;
UPDATE creature_template SET ScriptName='npc_brann_hos' WHERE entry=28070;

-- Boss Sjonnir and adds
UPDATE creature_template SET AIName='EventAI' WHERE entry IN (27979,27982);

DELETE FROM creature_ai_scripts WHERE creature_id IN (27979,27982);
INSERT INTO creature_ai_scripts (id, creature_id, event_type, event_inverse_phase_mask, event_chance, event_flags, event_param1, event_param2, event_param3, event_param4, action1_type, action1_param1, action1_param2, action1_param3, action2_type, action2_param1, action2_param2, action2_param3, action3_type, action3_param1, action3_param2, action3_param3, COMMENT) VALUES
('2797901', '27979', '0', '0', '100', '3','5000', '10000', '5000', '5000', '11', '50900', '4', '1', '0', '0', '0', '0', '0', '0', '0', '0', 'Forged Iron Trogg(Normal) - Cast Lighting Shock'),
('2797902', '27979', '0', '0', '100', '5','5000', '10000', '5000', '5000', '11', '59852', '4', '1', '0', '0', '0', '0', '0', '0', '0', '0', 'Forged Iron Trogg(Heroic) - Cast Lighting Shock'),
('2798201', '27982', '0', '0', '100', '3','5000', '10000', '5000', '5000', '11', '50895', '4', '1', '0', '0', '0', '0', '0', '0', '0', '0', 'Forged Iron Dwarf(Normal) - Cast Lighting Tether'),
('2798202', '27982', '0', '0', '100', '5','5000', '10000', '5000', '5000', '11', '59851', '4', '1', '0', '0', '0', '0', '0', '0', '0', '0', 'Forged Iron Dwarf(Heroic) - Cast Lighting Tether');

UPDATE creature_loot_template SET ChanceOrQuestChance=28 WHERE entry = '31381' AND item ='37650';
UPDATE creature_loot_template SET ChanceOrQuestChance=28 WHERE entry = '31381' AND item ='37651';
UPDATE creature_loot_template SET ChanceOrQuestChance=27 WHERE entry = '31381' AND item ='37652';

-- add Emblems of Heroism into loot
DELETE FROM creature_loot_template WHERE entry IN (31384, 31381, 31386) AND item = 40752;
INSERT INTO creature_loot_template (entry, item, ChanceOrQuestChance, groupid, mincountOrRef, maxcount, lootcondition, condition_value1, condition_value2) VALUES
('31384', '40752', '100', '0', '1', '1', '0', '0', '0'),
('31386', '40752', '100', '1', '1', '1', '0', '0', '0'),
('31381', '40752', '100', '2', '1', '1', '0', '0', '0');

-- delete Frozen Orb from Maiden loot
DELETE FROM creature_loot_template WHERE entry = 31384 AND item = 43102;

UPDATE creature_template SET ScriptName='mob_tribuna_controller' WHERE entry=28234;

-- trash mobs
DELETE FROM creature_movement WHERE id IN (126693,126700,126702,126708,126691,126709,126715,126716,126710,126692,126735,126734,126736,126733,126746,126749,126750);
INSERT INTO creature_movement(id,POINT,position_x,position_y,position_z,waittime) VALUES
(126693,1,1156.144531,753.906250,195.938095,500),
(126693,2,1156.114531,773.906250,195.044525,500),
(126693,3,1156.144531,753.906250,195.938095,500),
(126709,1,1152.999146,755.085338,195.044495,500),
(126709,2,1153.0,773.085022,195.044006,500),
(126709,3,1152.999146,755.085338,195.044495,500),
(126692,1,1150.654907,753.962524,195.937958,500),
(126692,2,1150.654907,773.962524,195.049744,500),
(126692,3,1150.654907,753.962524,195.937958,500),
(126710,1,1172.025757,743.404541,195.642105,3000),
(126710,2,1134.164795,743.344604,195.678207,3000),
(126710,3,1172.025757,743.404541,195.642105,3000),
(126735,1,1122.563721,662.999023,196.235123,0),
(126735,2,1124.819946,641.487000,196.235001,0),
(126735,3,1141.299805,629.045654,196.235001,3000),
(126735,4,1124.819946,641.487000,196.235001,0),
(126735,5,1122.563721,662.999023,196.235001,0),
(126735,6,1126.489990,691.322998,196.235001,0),
(126735,7,1138.680054,701.614990,196.235001,3000),
(126734,1,1195.349976,668.413025,196.235001,0),
(126734,2,1183.709961,689.814026,196.235001,0),
(126734,3,1171.010010,701.890991,196.235001,3000),
(126734,4,1183.709961,689.814026,196.235001,0),
(126734,5,1195.349976,668.413025,196.235001,0),
(126734,6,1180.569946,641.325012,196.235001,0),
(126734,7,1166.361206,627.991577,196.235001,3000),
(126733,1,1049.140015,617.059998,207.309998,4000),
(126733,2,1047.989990,541.190002,207.311005,4000),
(126733,3,1049.140015,617.059998,207.309998,4000),
(126736,1,968.867981,666.700989,196.488007,4000),
(126736,2,917.398987,666.765991,196.212997,4000),
(126736,3,968.867981,666.700989,196.488007,4000),
(126746,1,974.549011,419.574005,205.994003,0),
(126746,2,987.208984,406.528992,205.994003,0),
(126746,3,980.135010,387.829589,205.994003,0),
(126746,4,968.229004,380.423004,205.994003,0),
(126746,5,951.559998,382.550995,205.994003,0),
(126746,6,945.036987,397.223999,205.994003,0),
(126746,7,945.989990,412.989014,205.994003,0),
(126746,8,956.713013,424.529999,205.994003,0),
(126746,9,974.549011,419.574005,205.994003,0),
(126749,1,980.135010,387.829589,205.994003,0),
(126749,2,968.229004,380.423004,205.994003,0),
(126749,3,951.559998,382.550995,205.994003,0),
(126749,4,945.036987,397.223999,205.994003,0),
(126749,5,945.989990,412.989014,205.994003,0),
(126749,6,956.713013,424.529999,205.994003,0),
(126749,7,974.549011,419.574005,205.994003,0),
(126749,8,987.208984,406.528992,205.994003,0),
(126749,9,980.135010,387.829589,205.994003,0),
(126750,1,945.036987,397.223999,205.994003,0),
(126750,2,945.989990,412.989014,205.994003,0),
(126750,3,956.713013,424.529999,205.994003,0),
(126750,4,974.549011,419.574005,205.994003,0),
(126750,5,987.208984,406.528992,205.994003,0),
(126750,6,980.135010,387.829589,205.994003,0),
(126750,7,968.229004,380.423004,205.994003,0),
(126750,8,951.559998,382.550995,205.994003,0),
(126750,9,945.036987,397.223999,205.994003,0), 
(126691,1,1080.1496,673.0936,201.977554,0),
(126691,2,1080.1496,670.8429,201.977554,0),
(126691,3,1079.815430,654.56485,201.977554,0),
(126691,4,1084.36084,649.84259,201.977554,0),
(126691,5,1091.300415,651.282654,201.977554,0),
(126691,6,1092.84643,658.208069,201.977554,0),
(126691,7,1092.753296,679.110718,201.977554,0),
(126691,8,1086.995972,683.807983,201.977554,0),
(126691,9,1083.078979,682.278687,201.977554,0),
(126691,10,1080.300903,676.425537,201.977554,0),
(126691,11,1080.1496,673.0936,201.977554,0),
(126702,1,1080.1496,670.8429,201.977554,0),
(126702,2,1079.815430,654.56485,201.977554,0),
(126702,3,1084.36084,649.84259,201.977554,0),
(126702,4,1091.300415,651.282654,201.977554,0),
(126702,5,1092.84643,658.208069,201.977554,0),
(126702,6,1092.753296,679.110718,201.977554,0),
(126702,7,1086.995972,683.807983,201.977554,0),
(126702,8,1083.078979,682.278687,201.977554,0),
(126702,9,1080.300903,676.425537,201.977554,0),
(126702,10,1080.1496,673.0936,201.977554,0),
(126702,11,1080.1496,670.8429,201.977554,0),
(126708,1,1080.300903,676.425537,201.977554,0),
(126708,2,1080.1496,673.0936,201.977554,0),
(126708,3,1080.1496,670.8429,201.977554,0),
(126708,4,1079.815430,654.56485,201.977554,0),
(126708,5,1084.36084,649.84259,201.977554,0),
(126708,6,1091.300415,651.282654,201.977554,0),
(126708,7,1092.84643,658.208069,201.977554,0),
(126708,8,1092.753296,679.110718,201.977554,0),
(126708,9,1086.995972,683.807983,201.977554,0),
(126708,10,1083.078979,682.278687,201.977554,0),
(126708,11,1080.300903,676.425537,201.977554,0),
(126716,1,1033.892944,663.25946,202.155914,3000),
(126716,2,1062.135864,663.603638,202.154968,3000),
(126716,3,1033.892944,663.25946,202.155914,3000),
(126715,1,1002.806885,666.430847,201.978439,3000),
(126715,2,1028.738159,666.633118,202.565186,3000),
(126715,3,1002.806885,666.430847,201.978439,3000);

UPDATE creature_template SET MovementType= 1 WHERE entry =27973;
UPDATE creature SET movementtype = '2' WHERE guid IN (126693,126700,126702,126708,126691,126709,126715,126716,126710,126692,126735,126734,126736,126733,126746,126749,126750);

-- Old Krystallus ACID scripts
-- UPDATE creature_template SET ainame='EventAI' WHERE entry =27977;
-- DELETE FROM `creature_ai_scripts` WHERE (`creature_id`=27977);
-- INSERT INTO `creature_ai_scripts` (`id`,`creature_id`,`event_type`,`event_inverse_phase_mask`,`event_chance`,`event_flags`,`event_param1`,`event_param2`,`event_param3`,`event_param4`,`action1_type`,`action1_param1`,`action1_param2`,`action1_param3`,`action2_type`,`action2_param1`,`action2_param2`,`action2_param3`,`action3_type`,`action3_param1`,`action3_param2`,`action3_param3`,`comment`) VALUES
-- ('2797701','27977','4','0','100','6','0','0','0','0','1','-279771','0','0','0','0','0','0','0','0','0','0','Krystallus - Aggro Yell'),
-- ('2797702','27977','0','0','100','3','3000','3000','9500','15000','11','50843','4','0','0','0','0','0','0','0','0','0','Krystallus (Normal) - Cast Boulder Toss'),
-- ('2797703','27977','0','0','100','5','3000','3000','9500','15000','11','59742','4','0','0','0','0','0','0','0','0','0','Krystallus (Heroic) - Cast Boulder Toss'),
-- ('2797704','27977','0','0','100','7','9000','9000','19500','25000','11','59750','4','0','0','0','0','0','0','0','0','0','Krystallus - Cast ground spike'),
-- ('2797705','27977','0','0','100','3','15000','19000','29500','32000','11','33325','1','7','0','0','0','0','1','-279772','0','0','Krystallus (Normal) - Ground Slam'),
-- ('2797706','27977','0','0','100','5','15000','19000','29500','32000','11','33325','1','7','0','0','0','0','1','-279772','0','0','Krystallus (Heroic) - Ground Slam'),
-- ('2797707','27977','0','0','100','3','22000','29000','19500','25000','11','50868','0','0','0','0','0','0','0','0','0','0','Krystallus (Normal) - Cast Stomp'),
-- ('2797708','27977','0','0','100','5','22000','29000','19500','25000','11','59744','0','0','0','0','0','0','0','0','0','0','Krystallus (Heroic) - Cast Stomp'),
-- ('2797709','27977','5','0','100','7','5000','6000','0','0','1','-279773','0','0','0','0','0','0','0','0','0','0','Krystallus - Kill Player Yell'),
-- ('2797710','27977','6','0','100','6','0','0','0','0','1','-279774','0','0','0','0','0','0','0','0','0','0','Krystallus - Death Yell');
